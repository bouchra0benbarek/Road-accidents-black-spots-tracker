{% load static %}

<!-- <a href="/">LOGO</a>
{% if request.user.is_authenticated%}
<a href="{% url 'logout' %}">Logout</a>
{%else%}
<a href="{% url 'login' %}">Login</a>
{%endif%} -->

<nav class="sidenav" id="sidenav-main">
  
  <div class="sidenav-inner">
    <div class="sidenav-header  align-items-center">
      <a class="navbar-brand" href="/">
        <img src="{% static 'images/APP LOGO.svg'%}" class="navbar-brand-img" alt="logo.">
      </a>
    </div>
    <div class="navbar-inner">
      <!-- Collapse -->
      <!-- <div class="collapse navbar-collapse" id="sidenav-collapse-main"> -->
        <!-- Nav items -->
        <ul class="navbar-nav">
          <li class="nav-item">
          
              <button class="dropdown-btn"> 
                <i class="bi-file-spreadsheet"></i>  
                <span>Canevas de traitements</span> 
              </button>
                <div class="dropdown-container">
                  {% if perms.user.is_superuser %}
                  <a href="/List-caneva"> <i class="bi-clock-history"></i> <span class="nav-link-text">Historique</span> </a>
                  {% else %}
                  <a href="/create-caneva/new"> <i class="bi-plus-circle"></i><span class="nav-link-text">Nouveau</span> </a>
                  <a href="/List-caneva"> <i class="bi-clock-history"></i> <span class="nav-link-text">Historique</span> </a>
                  {% endif%}
                  
                </div>
          </li> 
          <li class="nav-item">
            <a href="/dashboard">
              <i class="bi-house"></i>
              <span class="nav-link-text">Tableaux de bord</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="/cartographie">
              <i class="bi-map"></i>
              <span class="nav-link-text">Cartographies</span>
            </a>
          </li>
          {% if user.get_username == "chargé_étude" %}
          <li class="nav-item">
            <button class="dropdown-btn"> 
              <i class="bi-file-earmark-text"></i>
              <span class="nav-link-text">Rapports </span>
            </button>
            <div class="dropdown-container">
              
              <a href="/report/new"> <i class="bi-plus-circle"></i><span class="nav-link-text">Nouveau</span> </a>
              <a href="/reports"> <i class="bi-clock-history"></i> <span class="nav-link-text">Liste rapports</span> </a>
             
            </div>
          </li>
          {% endif%}
                    
        </ul>
      <!-- </div> -->
      <hr class="line"/>
      <ul class="navbar-nav">
        {% if user.get_username == "admin" %}
        <li class="nav-item">
          <a href="/admin">
            <i class="bi-gear"></i>
            <span>Paramètres</span>
          </a>
        </li>
        {% endif %}
        <li class="nav-item">
          {% if request.user.is_authenticated%}
          <a href="/logout">
            <i class="bi-box-arrow-left"></i>
            <span>Se déconnecter</span>
          </a>
          {% endif %}
        </li>
      </ul>
    </div>
  </div>
  <script>
    var dropdown = document.getElementsByClassName("dropdown-btn");
    var i;

    for (i = 0; i < dropdown.length; i++) {
      dropdown[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var dropdownContent = this.nextElementSibling;
        if (dropdownContent.style.display === "grid") {
          dropdownContent.style.display = "none";
        } else {
          dropdownContent.style.display = "grid";
        }
      });
    }
        

          
    

    // for (i = 0; i < dropdown.length; i++) {
    //   dropdown[i].addEventListener("click", function() {
    //     this.classList.toggle("active");
    //     var dropdownContent = this.nextElementSibling;
        
    //     if (document.querySelector('.dropdown-container').style.display === "block") {
    //       document.querySelector('.dropdown-container').style.display = "none";
    //     } else {
    //       document.querySelector('.dropdown-container').style.displa = "block";
    //     }
    //   });
//}
  </script>
</nav>